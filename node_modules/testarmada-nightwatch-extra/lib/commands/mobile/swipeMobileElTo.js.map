{"version":3,"sources":["../../../src/commands/mobile/swipeMobileElTo.js"],"names":["SwipeMobileElTo","nightwatch","call","cmd","inherits","prototype","do","value","self","options","path","client","sessionId","method","data","ELEMENT","x","y","protocol","result","status","pass","fail","command","using","selector","cb","successMessage","failureMessage","startTime","Date","getTime","seenCount","checkConditions","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,kBAAkB,SAAlBA,eAAkB,GAA6B;AAAA,MAAnBC,UAAmB,uEAAN,IAAM;;AACnD,8BAAYC,IAAZ,CAAiB,IAAjB,EAAuBD,UAAvB;AACA,OAAKE,GAAL,GAAW,iBAAX;AACD,CAHD;;AAKA,eAAKC,QAAL,CAAcJ,eAAd;;AAEAA,gBAAgBK,SAAhB,CAA0BC,EAA1B,GAA+B,UAAUC,KAAV,EAAiB;AAC9C,MAAMC,OAAO,IAAb;;AAEA,MAAMC,UAAU;AACdC,wBAAkB,KAAKC,MAAL,CAAYC,SAA9B,mBADc;AAEdC,YAAQ,MAFM;AAGdC,UAAM;AACJ,iBAAW,CACT,EAAE,UAAU,OAAZ,EAAqB,WAAW,EAAE,WAAWP,MAAMQ,OAAnB,EAAhC,EADS,EAET,EAAE,UAAU,MAAZ,EAAoB,WAAW,EAAE,MAAM,GAAR,EAA/B,EAFS,EAGT,EAAE,UAAU,QAAZ,EAAsB,WAAW,EAAE,KAAK,KAAKC,CAAZ,EAAe,KAAK,KAAKC,CAAzB,EAAjC,EAHS,EAIT,EAAE,UAAU,SAAZ,EAAuB,WAAW,EAAlC,EAJS;AADP;AAHQ,GAAhB;;AAYA,OAAKC,QAAL,CAAcT,OAAd,EAAuB,UAACU,MAAD,EAAY;AACjC,QAAIA,OAAOC,MAAP,KAAkB,CAAtB,EAAyB;AACvBZ,WAAKa,IAAL,CAAUF,OAAOZ,KAAjB;AACD,KAFD,MAEO;AACLC,WAAKc,IAAL;AACD;AACF,GAND;AAOD,CAtBD;;AAwBA;AACAtB,gBAAgBK,SAAhB,CAA0BkB,OAA1B,GAAoC,UAAUC,KAAV,EAAiBC,QAAjB,EAA2BT,CAA3B,EAA8BC,CAA9B,EAAiCS,EAAjC,EAAqC;AACvE,OAAKD,QAAL,GAAgBA,QAAhB;AACA,OAAKD,KAAL,GAAaA,KAAb;AACA,OAAKE,EAAL,GAAUA,EAAV;AACA,OAAKV,CAAL,GAASA,CAAT;AACA,OAAKC,CAAL,GAASA,CAAT;;AAEA,OAAKU,cAAL,GAAsB,eAAa,KAAKH,KAAlB,SAA2B,KAAKC,QAAhC,qCACMT,CADN,YACcC,CADd,8BAAtB;AAEA,OAAKW,cAAL,GAAsB,eAAa,KAAKJ,KAAlB,SAA2B,KAAKC,QAAhC,uCACQT,CADR,YACgBC,CADhB,8BAAtB;;AAGA,OAAKY,SAAL,GAAkB,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAjB;;AAEA;AACA,OAAKC,SAAL,GAAiB,CAAjB;AACA,OAAKC,eAAL;;AAEA,SAAO,IAAP;AACD,CAnBD;;AAqBAC,OAAOC,OAAP,GAAiBnC,eAAjB","file":"swipeMobileElTo.js","sourcesContent":["import util from \"util\";\nimport BaseCommand from \"../../base-mobile-command\";\n\nconst SwipeMobileElTo = function (nightwatch = null) {\n  BaseCommand.call(this, nightwatch);\n  this.cmd = \"swipemobileelto\";\n};\n\nutil.inherits(SwipeMobileElTo, BaseCommand);\n\nSwipeMobileElTo.prototype.do = function (value) {\n  const self = this;\n\n  const options = {\n    path: `/session/${this.client.sessionId}/touch/perform`,\n    method: \"POST\",\n    data: {\n      \"actions\": [\n        { \"action\": \"press\", \"options\": { \"element\": value.ELEMENT } },\n        { \"action\": \"wait\", \"options\": { \"ms\": 800 } },\n        { \"action\": \"moveTo\", \"options\": { \"x\": this.x, \"y\": this.y } },\n        { \"action\": \"release\", \"options\": {} }]\n    }\n  };\n\n  this.protocol(options, (result) => {\n    if (result.status === 0) {\n      self.pass(result.value);\n    } else {\n      self.fail();\n    }\n  });\n};\n\n/*eslint max-params:[\"error\", 5] */\nSwipeMobileElTo.prototype.command = function (using, selector, x, y, cb) {\n  this.selector = selector;\n  this.using = using;\n  this.cb = cb;\n  this.x = x;\n  this.y = y;\n\n  this.successMessage = `Selector '${this.using}:${this.selector}' `\n    + `was swiped toward {x:${x}, y:${y}} after %d milliseconds.`;\n  this.failureMessage = `Selector '${this.using}:${this.selector}' `\n    + `was't swiped toward {x:${x}, y:${y}} after %d milliseconds.`;\n\n  this.startTime = (new Date()).getTime();\n\n  // Track how many times selector is successfully checked by /element protocol\n  this.seenCount = 0;\n  this.checkConditions();\n\n  return this;\n};\n\nmodule.exports = SwipeMobileElTo;\n"]}