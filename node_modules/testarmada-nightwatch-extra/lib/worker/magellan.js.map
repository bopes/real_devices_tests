{"version":3,"sources":["../../src/worker/magellan.js"],"names":["MagellanWorker","nightwatch","metadata","process","send","type","message","signal","Error","customMessage"],"mappings":";;;;;;;;;;IAAqBA,c;AACnB,gCAA4B;AAAA,QAAdC,UAAc,QAAdA,UAAc;;AAAA;;AAC1B,SAAKA,UAAL,GAAkBA,UAAlB;AACD;;;;iCAEYC,Q,EAAU;AACrB;AACA;AACA;AACA;;;;;;AAMA,UAAIC,QAAQC,IAAZ,EAAkB;AAChB;AACA;;AAEAD,gBAAQC,IAAR,CAAa;AACXC,gBAAM,gBADK;AAEXH;AAFW,SAAb;AAID;AACF;;;kCAEaI,O,EAAS;AACrB;AACA,UAAIA,WAAWA,QAAQC,MAAR,KAAmB,MAAlC,EAA0C;AACxC;AACA,cAAM,IAAIC,KAAJ,CAAUF,QAAQG,aAAR,IAAyB,cAAnC,CAAN;AACD;AACF;;;;;;kBAhCkBT,c","file":"magellan.js","sourcesContent":["export default class MagellanWorker {\n  constructor({ nightwatch }) {\n    this.nightwatch = nightwatch;\n  }\n\n  emitMetadata(metadata) {\n    /* istanbul ignore if */\n    // nightwatch will add response from /session to capabilities\n    // we need that info to compose the result sometimes\n    /*\n      metadata: {\n        sessionId: sessionId\n        capabilities: capabilities\n      }\n     */\n    if (process.send) {\n      // notice: each executor will generate report url by itself\n      //         only meta data is emitted here\n\n      process.send({\n        type: \"test-meta-data\",\n        metadata\n      });\n    }\n  }\n\n  handleMessage(message) {\n    /* istanbul ignore if */\n    if (message && message.signal === \"bail\") {\n      // instead of counting on assertion, we throws error out and fail the test directly\n      throw new Error(message.customMessage || \"Test killed.\");\n    }\n  }\n}\n"]}