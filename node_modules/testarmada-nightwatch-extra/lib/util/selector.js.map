{"version":3,"sources":["../../src/util/selector.js"],"names":["normalize","selector","selectorToken","replace","val","substring","length","depageobjectize","locateStrategy","ret","last"],"mappings":";;;;;;AAEA;;;;AACA;;;;;;kBAEe;AACb;;;;;;;;;;;;;;;AAeAA,WAhBa,qBAgBHC,QAhBG,EAgBO;AAClB;AACA,QAAI,wBAASC,aAAb,EAA4B;AAC1BD,iBAAWA,SAASE,OAAT,CAAiB,eAAjB,EAAkC,UAACC,GAAD,EAAS;AACpD;AACAA,cAAMA,IAAIC,SAAJ,CAAc,CAAd,EAAiBD,IAAIE,MAAJ,GAAa,CAA9B,CAAN;AACA,eAAO,wBAASJ,aAAT,CAAuBE,GAAvB,CAAP;AACD,OAJU,CAAX;AAKD;AACD,WAAOH,QAAP;AACD,GA1BY;;;AA4Bb;;;;;;;;;;AAUAM,iBAtCa,2BAsCGN,QAtCH,EAsCaO,cAtCb,EAsC6B;AACxC,QAAIC,MAAMR,QAAV;;AAEA,QAAIO,mBAAmB,WAAvB,EAAoC;AAClCC,YAAM,iBAAEC,IAAF,CAAOT,QAAP,EAAiBA,QAAvB;AACD;;AAED,WAAOQ,GAAP;AACD;AA9CY,C","file":"selector.js","sourcesContent":["\n\nimport _ from \"lodash\";\nimport BaseTest from \"../base-test-class\";\n\nexport default {\n  /**\n   *\n   * Allow {token} to be used in selectors to extract to an arbitrary selector to make\n   *  automation-oriented elements easier to select.\n   * This is a noop unless the BaseTestClass.selectorToken is implemented.  This should\n   * be set as a function with a single param (the token to be replaced) and return the\n   * replacement value.\n   * ex:\n   * require('./base-test-class').selectorToken = function (value) {\n   *   return '[data-selector-id=\"' + value + '\"]';\n   * }\n   * @param {String} selector\n   * @returns {String} transformed selector\n   */\n\n  normalize(selector) {\n    /* istanbul ignore if */\n    if (BaseTest.selectorToken) {\n      selector = selector.replace(/(\\{[^\\}]+\\})/g, (val) => {\n        // remove {} wrapper\n        val = val.substring(1, val.length - 1);\n        return BaseTest.selectorToken(val);\n      });\n    }\n    return selector;\n  },\n\n  /**\n   *\n   * Process params of magellan JQuery function, pop up the first param (nightwatch selector),\n   * and return the last element (element selector) if the selector is defined in\n   * nightwatch page object pattern.\n   * @param {Object} Arguments of magellan JQuery function\n   * @param {String} nightwatch element locate strategy\n   * @returns {String} processed element selector and locateStrategy\n   */\n\n  depageobjectize(selector, locateStrategy) {\n    let ret = selector;\n\n    if (locateStrategy === \"recursion\") {\n      ret = _.last(selector).selector;\n    }\n\n    return ret;\n  }\n};\n"]}