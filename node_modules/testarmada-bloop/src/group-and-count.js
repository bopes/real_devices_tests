/* eslint max-params: 0 */
"use strict";

module.exports = (ary, pred, count, preload) => {
  const groups = {};
  if (preload) {
    for (const k of preload) {
      groups[k] = 0;
    }
  }
  for (const item of ary) {
    const group = pred(item);
    if (groups[group] === undefined) {
      groups[group] = 0;
    }
    groups[group] += count ? count(item) : 1;
  }
  return groups;
};
