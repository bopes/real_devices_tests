/* eslint import/no-extraneous-dependencies: 0, no-undef: 0 */

const expect = require("chai").expect;
const utils = require("../../src/srr/utils");

describe("SRR utilities", () => {
  it("handle values", () => {
    expect(utils.values({})).to.eql([]);
    expect(utils.values({a: 1})).to.eql([1]);
    expect(utils.values({a: 1, b: 2})).to.eql([1, 2]);
  });

  it("handle totalTime", () => {
    expect(utils.totalTime([])).to.eql(0);
    expect(utils.totalTime([{timeElapsed: 100}])).to.eql(100);
    expect(utils.totalTime([{timeElapsed: 100}, {timeElapsed: 200}])).to.eql(300);
  });

  it("handle markers", () => {
    expect(utils.marker({data: {markers: [{t: 100}]}}). t).to.eql(100);
    expect(utils.marker({data: {t: 100}}). t).to.eql(100);
  });

  it("handle average", () => {
    expect(utils.average([])).to.eql(0);
    expect(utils.average([10, 20, 30])).to.eql(20);
    expect(utils.average([2, 4, 4, 4, 5, 5, 7, 9])).to.eql(5);
  });

  it("handle stddev", () => {
    expect(utils.stddev([])).to.eql(0);
    expect(utils.stddev([10, 20, 30])).to.eql(8.16496580927726);
    expect(utils.stddev([2, 4, 4, 4, 5, 5, 7, 9])).to.eql(2);
  });
});
